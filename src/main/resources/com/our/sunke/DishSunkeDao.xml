<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sunke.dao.DishSunkeDao">
	<select id="reCate" resultType="java.lang.String">
		SELECT dishs_cate FROM dishs
		GROUP BY dishs_cate
	</select>
	
	<select id="getDishCount" resultType="java.lang.Integer">
       select count(*) from dishs where dishs_cate=#{dishCate} and dishs_delete=0
    </select>
    <select id="listDishsAll" resultType="com.our.pojo.Dishs">
    select * from dishs where dishs_cate=#{cateName} and dishs_delete=0
       LIMIT #{pageStart},#{pageSize}
    </select>
    <select id="rePlace" resultType="java.lang.String">
    SELECT table_cate FROM table_s
      group by table_cate
    </select>
    <select id="reNum" resultType="java.lang.Integer">
      SELECT table_number FROM table_s
      where table_cate=#{placeName}
    </select>
     <select id="reStatus" resultType="com.sunke.entity.TableStatus">
      SELECT table_status,table_number FROM table_s
    </select>
    <select id="getMaxId" resultType="java.lang.Integer">
    SELECT max(order_id) FROM order_history
    </select>
   <insert id="insertHistory">
       INSERT INTO order_history (`table_number`, `total_price`, `begin_time`, `payment_state`, `order_id`, `user_id`, `order_delete`)
        VALUES (#{body.table_number}, #{body.total_price}, #{body.begin_time}, #{body.payment_state}, #{body.order_id}, #{body.user_id}, #{body.order_delete});
    </insert>
     <insert id="insertDishList">
      INSERT INTO `order_list` (`dishs_id`, `dishs_name`, `number`, `price`, `cook_state`, `order_id`) 
      VALUES (#{body.dishs_id}, #{body.dishs_name}, #{body.number}, #{body.price}, #{body.cook_state}, #{body.order_id});
    </insert>
    <select id="getFinalCall" resultType="java.lang.String">
    	SELECT  notice_message FROM notice order by notice_id DESC LIMIT 1
    </select>
    <update id="updateTableStatus">
     update table_s set table_status=1 where table_number=#{number}
    </update>
    <select id="getStatus" resultType="java.lang.Integer">
    	SELECT  table_status FROM table_s where table_number=#{number} 
    </select>
    <select id="getAllMes" resultType="com.sunke.entity.Dish_DishDetail">
    SELECT * FROM dishs join dishs_detail on dishs.dishs_id=dishs_detail.dishs_id
and dishs.dishs_id=#{id}
    </select>
    <select id="reReadyDish" resultType="com.our.pojo.Order_list">
         SELECT * FROM order_list where cook_state=3
    </select>
    <select  id="getBestDish" resultType="com.our.pojo.Dishs">
    SELECT  *  FROM dishs where  recommend=1 and dishs_delete=0 limit 10,4
    </select>
    
</mapper>